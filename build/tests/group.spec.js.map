{"version":3,"sources":["../../src/tests/group.spec.js"],"names":["chai","use","chaiHttp","should","accessToken","url","requestId","describe","it","done","request","app","post","send","username","password","end","err","res","data","body","token","has","status","set","name","description","error","have","property","emptyValues","include","be","an","a","get","id","forEach","group","patch","groupId","delete","message"],"mappings":"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","sourcesContent":["import chai from 'chai';\nimport chaiHttp from 'chai-http';\nimport app from '../server';\n\nchai.use(chaiHttp);\nchai.should();\nlet accessToken;\nconst url = '/api/v1/groups';\nlet requestId;\n\ndescribe('Groups API', () => {\n  describe('Login functionality', () => {\n    it('should log in a registered user', (done) => {\n      chai.request(app)\n        .post('/api/v1/auth/login')\n        .send({\n          username: 'imonitieyahoo',\n          password: 'imonitie.yahoo',\n        })\n        .end((err, res) => {\n          const { data } = res.body;\n          accessToken = data.token;\n          res.should.has.status(200);\n          done();\n        });\n    });\n  });\n  describe('POST /api/v1/groups', () => {\n    it('should return a 400 error for missing inputs', (done) => {\n      chai.request(app)\n        .post(url)\n        .set('x-access-token', accessToken)\n        .send({\n          name: ' ',\n          description: 'A group to hold details for Andelan cycle 42 Bootcampers',\n        })\n        .end((err, res) => {\n          const { error } = res.body;\n          res.should.have.status(400);\n          res.body.should.have.property('status', 400);\n          res.body.should.have.property('error');\n          error.should.have.property('missingValues');\n          error.emptyValues[0].should.include('name');\n          done();\n        });\n    });\n    it('should create a group that has all the details', (done) => {\n      chai.request(app)\n        .post(url)\n        .set('x-access-token', accessToken)\n        .send({\n          name: 'Andela Cycle 42 Bootcampers',\n          description: 'A group to hold details for Andelan cycle 42 Bootcampers',\n        })\n        .end((err, res) => {\n          const { data } = res.body;\n          res.should.have.status(200);\n          res.body.should.have.property('status', 200);\n          res.body.should.have.property('data');\n          data.should.be.an('object');\n          data.should.have.property('name');\n          data.name.should.be.a('string');\n          done();\n        });\n    });\n  });\n  describe('GET /api/v1/groups', () => {\n    it('should get all the groups registered by the requester', (done) => {\n      chai.request(app)\n        .get('/api/v1/groups')\n        .set('x-access-token', accessToken)\n        .end((err, res) => {\n          const { data } = res.body;\n          res.should.have.status(200);\n          res.body.should.have.property('status', 200);\n          res.body.should.have.property('data');\n          requestId = data[0].id;\n          data.should.be.an('array');\n          data.forEach((group) => {\n            group.should.have.property('name');\n            group.should.have.property('id');\n          });\n          done();\n        });\n    });\n  });\n  describe('PATCH /api/v1/groups/1/name', () => {\n    it('should edit the name of a group', (done) => {\n      chai.request(app)\n        .patch('/api/v1/groups/1/name')\n        .set('x-access-token', accessToken)\n        .send({\n          groupId: requestId,\n          name: 'andelabootcampers',\n        })\n        .end((err, res) => {\n          const { data } = res.body;\n          res.should.have.status(200);\n          res.body.should.have.property('status', 200);\n          res.body.should.have.property('data');\n          data.should.be.an('object');\n          data.should.have.property('name');\n          done();\n        });\n    });\n  });\n  describe('POST /api/v1/groups/1/users', () => {\n    it('should add user to a group', (done) => {\n      chai.request(app)\n        .post('/api/v1/groups/1/users')\n        .set('x-access-token', accessToken)\n        .send({\n          username: 'imonitieyahoo',\n        })\n        .end((err, res) => {\n          const { data } = res.body;\n          res.should.have.status(200);\n          res.body.should.have.property('status', 200);\n          res.body.should.have.property('data');\n          data.should.be.an('object');\n          done();\n        });\n    });\n  });\n  describe('DELETE /api/v1/groups/1/users/1', () => {\n    it('should delete a specific user from a group', (done) => {\n      chai.request(app)\n        .delete('/api/v1/groups/1/users/1')\n        .set('x-access-token', accessToken)\n        .end((err, res) => {\n          const { data } = res.body;\n          res.should.have.status(200);\n          res.body.should.have.property('status', 200);\n          res.body.should.have.property('data');\n          data.should.be.an('object');\n          data.should.have.property('message');\n          done();\n        });\n    });\n  });\n  describe('DELETE /api/v1/groups/1', () => {\n    it('should delete a group that belongs to the requester', (done) => {\n      chai.request(app)\n        .delete('/api/v1/groups/1')\n        .set('x-access-token', accessToken)\n        .end((err, res) => {\n          const { data } = res.body;\n          res.should.have.status(200);\n          res.body.should.have.property('status', 200);\n          res.body.should.have.property('data');\n          data.should.have.property('message');\n          data.message.should.have.property('id');\n          done();\n        });\n    });\n  });\n});\n"],"file":"group.spec.js"}