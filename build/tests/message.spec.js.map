{"version":3,"sources":["../../src/tests/message.spec.js"],"names":["chai","use","chaiHttp","should","describe","it","request","app","get","set","end","err","res","data","body","have","status","property","be","an","lengthOf","forEach","mail","satisfy","message","error","a","include","id","delete"],"mappings":"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","sourcesContent":["import chai from 'chai';\r\nimport chaiHttp from 'chai-http';\r\nimport app from '../server';\r\n\r\nchai.use(chaiHttp);\r\nchai.should();\r\n\r\ndescribe('Messages API', () => {\r\n  describe('GET /api/v1/messages', () => {\r\n    it('should get all the received messages for the requester', () => {\r\n      chai.request(app)\r\n        .get('/api/v1/messages')\r\n        .set('Accepts', 'application/json')\r\n        .end((err, res) => {\r\n          const { data } = res.body;\r\n          res.should.have.status(200);\r\n          res.body.should.have.property('status', 200);\r\n          res.body.should.have.property('data');\r\n          data.should.be.an('array');\r\n          data.should.have.lengthOf(5);\r\n          data.forEach((mail) => {\r\n            mail.should.satisfy(message => message.status === 'unread' || message.status === 'read');\r\n          });\r\n        });\r\n    });\r\n  });\r\n  \r\n  describe('GET /api/v1/messages/unread', () => {\r\n    it('should get all the unread received messages for the requester', () => {\r\n      chai.request(app)\r\n        .get('/api/v1/messages/unread')\r\n        .set('Accepts', 'application/json')\r\n        .end((err, res) => {\r\n          const { data } = res.body;\r\n          res.should.have.status(200);\r\n          res.body.should.have.property('status', 200);\r\n          res.body.should.have.property('data');\r\n          data.should.be.an('array');\r\n          data.should.have.lengthOf(3);\r\n          data.forEach((mail) => {\r\n            mail.should.satisfy(message => message.status === 'unread');\r\n          });\r\n        });\r\n    });\r\n  });\r\n  \r\n  describe('GET /api/v1/messages/sent', () => {\r\n    it('should get all the sent messages for the requester', () => {\r\n      chai.request(app)\r\n        .get('/api/v1/messages/sent')\r\n        .set('Accepts', 'application/json')\r\n        .end((err, res) => {\r\n          const { data } = res.body;\r\n          res.should.have.status(200);\r\n          res.body.should.have.property('status', 200);\r\n          res.body.should.have.property('data');\r\n          data.should.be.an('array');\r\n          data.should.have.lengthOf(3);\r\n          data.forEach((mail) => {\r\n            mail.should.satisfy(message => message.status === 'sent');\r\n          });\r\n        });\r\n    });\r\n  });\r\n  describe('GET /api/v1/messages/:id', () => {\r\n    it('should return a 404 error if id does not match any message record in the database', () => {\r\n      chai.request(app)\r\n        .get('/api/v1/messages/11')\r\n        .set('Accepts', 'application/json')\r\n        .end((err, res) => {\r\n          const { error } = res.body;\r\n          res.should.have.status(404);\r\n          res.body.should.have.property('status', 404);\r\n          res.body.should.have.property('error');\r\n          error.should.be.a('string');\r\n          error.should.include('Message');\r\n        });\r\n    });\r\n    it('should get a specific message for the requester', () => {\r\n      chai.request(app)\r\n        .get('/api/v1/messages/1')\r\n        .set('Accepts', 'application/json')\r\n        .end((err, res) => {\r\n          const { data } = res.body;\r\n          res.should.have.status(200);\r\n          res.body.should.have.property('status', 200);\r\n          res.body.should.have.property('data');\r\n          data.should.be.an('object');\r\n          data.should.satisfy(message => message.id === 1);\r\n        });\r\n    });\r\n  });\r\n  describe('DELETE /api/v1/messages/:id', () => {\r\n    it('should return a 404 error if id does not match any message record in the database', () => {\r\n      chai.request(app)\r\n        .delete('/api/v1/messages/11')\r\n        .set('Accepts', 'application/json')\r\n        .end((err, res) => {\r\n          const { error } = res.body;\r\n          res.should.have.status(404);\r\n          res.body.should.have.property('status', 404);\r\n          res.body.should.have.property('error');\r\n          error.should.be.a('string');\r\n          error.should.include('Message');\r\n        });\r\n    });\r\n    it('should delete a specific message and return the message string', () => {\r\n      chai.request(app)\r\n        .delete('/api/v1/messages/1')\r\n        .set('Accepts', 'application/json')\r\n        .end((err, res) => {\r\n          const { data } = res.body;\r\n          res.should.have.status(200);\r\n          res.body.should.have.property('status', 200);\r\n          res.body.should.have.property('data');\r\n          data.should.be.an('object');\r\n          data.should.have.a.property('message');\r\n          data.message.should.be.a('string');\r\n        });\r\n    });\r\n  });\r\n});\r\n"],"file":"message.spec.js"}