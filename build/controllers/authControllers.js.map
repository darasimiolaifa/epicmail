{"version":3,"sources":["../../src/controllers/authControllers.js"],"names":["authControllers","req","res","body","username","password","salt","bcrypt","genSaltSync","hashedPassword","hashSync","email","id","users","user","push","token"],"mappings":";;;;;;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;IAEqBA,e;;;;;;;;;2BACLC,G,EAAKC,G,EAAK;AAAA,sBACSD,GAAG,CAACE,IADb;AAAA,UACdC,QADc,aACdA,QADc;AAAA,UACJC,QADI,aACJA,QADI;;AAEtB,UAAMC,IAAI,GAAGC,kBAAOC,WAAP,EAAb;;AACA,UAAMC,cAAc,GAAGF,kBAAOG,QAAP,CAAgBL,QAAhB,EAA0BC,IAA1B,CAAvB;;AACA,UAAMK,KAAK,aAAMP,QAAN,kBAAX;AACA,UAAMQ,EAAE,GAAG,0BAAeC,kBAAf,IAAwB,CAAnC;;AAEA,UAAMC,IAAI;AACRF,QAAAA,EAAE,EAAFA,EADQ;AAERD,QAAAA,KAAK,EAALA,KAFQ;AAGRL,QAAAA,IAAI,EAAJA;AAHQ,SAILL,GAAG,CAACE,IAJC;AAKRE,QAAAA,QAAQ,EAAEI;AALF,QAAV;;AAOAI,yBAAME,IAAN,CAAWD,IAAX,EAdsB,CAgBtB;;;AACA,UAAME,KAAK,GAAG,4BAAcZ,QAAd,CAAd;AACA,aAAO,6BAAeF,GAAf,EAAoB;AAAEc,QAAAA,KAAK,EAALA,KAAF;AAASF,QAAAA,IAAI,EAAJA;AAAT,OAApB,EAAqC,GAArC,CAAP;AACD;;;0BAEYb,G,EAAKC,G,EAAK;AAAA,UACbE,QADa,GACAH,GAAG,CAACE,IADJ,CACbC,QADa;AAErB,UAAMY,KAAK,GAAG,4BAAcZ,QAAd,CAAd;AACA,aAAO,6BAAeF,GAAf,EAAoB;AAAEc,QAAAA,KAAK,EAALA;AAAF,OAApB,CAAP;AACD","sourcesContent":["/* eslint-disable no-trailing-spaces */\r\nimport bcrypt from 'bcryptjs';\r\nimport users from '../dummy/usersData';\r\nimport serverResponse from './authHelpers/serverResponse';\r\nimport generateToken from './authHelpers/generateToken';\r\nimport generateUserId from './authHelpers/idGenerator';\r\n\r\nexport default class authControllers {\r\n  static signup(req, res) {\r\n    const { username, password } = req.body;\r\n    const salt = bcrypt.genSaltSync();\r\n    const hashedPassword = bcrypt.hashSync(password, salt);\r\n    const email = `${username}@epicmail.com`;\r\n    const id = generateUserId(users) + 1;\r\n    \r\n    const user = {\r\n      id,\r\n      email,\r\n      salt,\r\n      ...req.body,\r\n      password: hashedPassword,\r\n    }; \r\n    users.push(user);\r\n    \r\n    // generate token with users username\r\n    const token = generateToken(username);\r\n    return serverResponse(res, { token, user }, 201);\r\n  }\r\n  \r\n  static login(req, res) {\r\n    const { username } = req.body; \r\n    const token = generateToken(username);\r\n    return serverResponse(res, { token });\r\n  }\r\n}\r\n"],"file":"authControllers.js"}