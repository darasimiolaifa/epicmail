{"version":3,"sources":["../../../src/middleware/validation/validateUsername.js"],"names":["url","users","username","usernameErrors","error","status","findIndex","user","push","search","RegExp","length","userIndex"],"mappings":";;;;;;;eAAe,kBAACA,GAAD,EAAMC,KAAN,EAAaC,QAAb,EAA0B;AACvC,MAAMC,cAAc,GAAG,EAAvB;AACA,MAAMC,KAAK,GAAG,EAAd;AACA,MAAIC,MAAM,GAAG,GAAb;;AAEA,MAAIL,GAAG,KAAK,qBAAZ,EAAmC;AACjC,QAAIC,KAAK,CAACK,SAAN,CAAgB,UAAAC,IAAI;AAAA,aAAIA,IAAI,CAACL,QAAL,KAAkBA,QAAtB;AAAA,KAApB,IAAsD,CAAC,CAA3D,EAA8D;AAC5DC,MAAAA,cAAc,CAACK,IAAf,CAAoB,qDAApB;AACD;;AACD,QAAIN,QAAQ,CAACO,MAAT,CAAgB,IAAIC,MAAJ,CAAW,gBAAX,CAAhB,IAAgD,CAAC,CAArD,EAAwD;AACtDP,MAAAA,cAAc,CAACK,IAAf,CAAoB,oFAApB;AACD;;AACD,QAAIL,cAAc,CAACQ,MAAf,GAAwB,CAA5B,EAA+B;AAC7BN,MAAAA,MAAM,GAAG,GAAT;AACD;AACF,GAVD,MAUO;AACL,QAAMO,SAAS,GAAGX,KAAK,CAACK,SAAN,CAAgB,UAAAC,IAAI;AAAA,aAAIA,IAAI,CAACL,QAAL,KAAkBA,QAAtB;AAAA,KAApB,MAAwD,CAAC,CAA3E;;AACA,QAAIU,SAAJ,EAAe;AACbT,MAAAA,cAAc,CAACK,IAAf,CAAoB,8CAApB;AACAH,MAAAA,MAAM,GAAG,GAAT;AACD;AACF;;AACDD,EAAAA,KAAK,CAACF,QAAN,GAAiBC,cAAjB;AACAC,EAAAA,KAAK,CAACC,MAAN,GAAeA,MAAf;AACA,SAAOD,KAAP;AACD,C","sourcesContent":["export default (url, users, username) => {\r\n  const usernameErrors = [];\r\n  const error = {};\r\n  let status = 200;\r\n  \r\n  if (url === '/api/v1/auth/signup') {\r\n    if (users.findIndex(user => user.username === username) > -1) {\r\n      usernameErrors.push('The username already exists. Please choose another.');\r\n    }\r\n    if (username.search(new RegExp(/[^0-9A-za-z._]/)) > -1) {\r\n      usernameErrors.push('Username should contain only alphanumeric characters, and the underscore character');\r\n    }\r\n    if (usernameErrors.length > 0) {\r\n      status = 400;\r\n    }\r\n  } else {\r\n    const userIndex = users.findIndex(user => user.username === username) === -1;\r\n    if (userIndex) {\r\n      usernameErrors.push('This username does not exist in our records.');\r\n      status = 404;\r\n    }\r\n  }\r\n  error.username = usernameErrors;\r\n  error.status = status;\r\n  return error;\r\n};\r\n"],"file":"validateUsername.js"}